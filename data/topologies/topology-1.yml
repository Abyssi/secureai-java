id: 3-tier-sample-topology-1

tasks:
  # Classic Api Gateway
  api-gateway-main:
    type: api-gateway
    replication: 3

  # Services
  microservice-rest:
    type: image
    replication: 1

  # Databases
  database-mysql-core:
    type: database
    replication: 2

connections:
  # First tier
  api-gateway-main-to-microservice-rest:
    type: http
    direction: bidirectional
    from: api-gateway-main
    to: microservice-rest

  # Second tier
  microservice-rest-to-database-mysql-core:
    type: proprietary
    direction: bidirectional
    from: microservice-rest
    to: database-mysql-core